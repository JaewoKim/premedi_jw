<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>PreMedi N.CER - Full Spectrum CDSS (Korean)</title>
    <style>
        :root { --primary: #4f46e5; --crt: #ef4444; --warn: #f59e0b; --bg: #f3f4f6; }
        body { font-family: 'Pretendard', sans-serif; margin: 0; display: flex; height: 100vh; background: var(--bg); color: #1f2937; }
        
        /* Layout */
        .sidebar { width: 380px; background: white; border-right: 1px solid #e5e7eb; display: flex; flex-direction: column; }
        .main { flex: 1; padding: 20px; display: flex; flex-direction: column; gap: 20px; }
        
        /* Header */
        .header { padding: 20px; border-bottom: 1px solid #e5e7eb; background: white; }
        .title { font-size: 18px; font-weight: 800; color: var(--primary); display: flex; align-items: center; gap: 8px; }
        .badge { background: #1f2937; color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px; }

        /* Filter Tabs */
        .tabs { display: flex; flex-wrap: wrap; gap: 5px; padding: 10px; background: #f9fafb; border-bottom: 1px solid #e5e7eb; }
        .tab { padding: 6px 10px; font-size: 11px; border: 1px solid #d1d5db; border-radius: 15px; background: white; cursor: pointer; color: #6b7280; transition: 0.2s; }
        .tab.active { background: var(--primary); color: white; border-color: var(--primary); font-weight: 600; }

        /* List */
        .list-container { flex: 1; overflow-y: auto; padding: 10px; }
        .item { padding: 12px; border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 8px; background: white; cursor: pointer; transition: 0.1s; }
        .item:hover { border-color: var(--primary); box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .item.selected { border: 2px solid var(--primary); background: #eef2ff; }
        .item-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }
        .item-title { font-size: 13px; font-weight: 700; }
        .item-sub { font-size: 11px; color: #6b7280; }
        .tag { font-size: 9px; padding: 1px 4px; border-radius: 3px; font-weight: 700; text-transform: uppercase; }
        .tag.crt { background: #fee2e2; color: #991b1b; }
        .tag.warn { background: #fef3c7; color: #92400e; }
        .tag.info { background: #e0f2fe; color: #075985; }

        /* Output Panels */
        .panels { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; flex: 1; min-height: 0; }
        .panel { background: white; border-radius: 12px; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .p-head { padding: 15px; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center; font-weight: 700; font-size: 15px; }
        .p-body { flex: 1; padding: 20px; overflow-y: auto; white-space: pre-wrap; line-height: 1.6; font-size: 13px; }
        
        .med { border-top: 4px solid #374151; }
        .med .p-body { font-family: 'Pretendard', sans-serif; color: #374151; } /* í•œê¸€ í°íŠ¸ ì ìš© */
        .pat { border-top: 4px solid #f59e0b; background: #fffbeb; }
        .pat .p-body { color: #4b5563; font-size: 14px; }

        .btn-copy { margin-top: auto; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 700; width: 150px; align-self: flex-end; }
    </style>
</head>
<body>

<div class="sidebar">
    <div class="header">
        <div class="title">ğŸ¥ PreMedi N.CER <span class="badge">Korean Ver</span></div>
        <div style="font-size:11px; color:#6b7280; margin-top:4px;">Stoelting Logic + User Sources [153-304]</div>
    </div>
    <div class="tabs" id="tabs">
        </div>
    <div class="list-container" id="list">
        </div>
</div>

<div class="main">
    <div class="panels">
        <div class="panel med">
            <div class="p-head">ğŸ‘¨â€âš•ï¸ Medical Record (EMR)</div>
            <div id="outMed" class="p-body" style="color:#9ca3af; text-align:center; padding-top:100px;">í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”.</div>
        </div>
        <div class="panel pat">
            <div class="p-head" style="color:#b45309;">ğŸ“± Patient Guide (App)</div>
            <div id="outPat" class="p-body" style="color:#9ca3af; text-align:center; padding-top:100px;">í™˜ì ì„¤ëª…ì´ ìƒì„±ë©ë‹ˆë‹¤.</div>
        </div>
    </div>
    <button class="btn-copy" onclick="copyResult()">ğŸ“‹ ì „ì²´ ë³µì‚¬</button>
</div>

<script>
    // ============================================================
    // INTEGRATED DATASET (Stoelting + Sources 153-304) - KOREAN VERSION
    // ============================================================
    const masterData = [
        // --- General / History ---
        { id: 'src_153', cat: 'special', lvl: 'crt', label: 'ì•„ë‚˜í•„ë½ì‹œìŠ¤ ê³¼ê±°ë ¥', sub: 'Src 153', med: "Anaphylaxis ê³¼ê±°ë ¥.\n[Stoelting] IgE ë§¤ê°œì„± vs ë¹„IgEì„± ê°ë³„ í•„ìš”. H1/H2 blocker ë° Steroid ì „ì²˜ì¹˜ ê³ ë ¤. Histamine-releasing NMB ì‚¬ìš© íšŒí”¼.", pat: "ê³¼ê±° ì‹¬í•œ ì•Œë ˆë¥´ê¸° ì‡¼í¬ ë³‘ë ¥ì´ ìˆì–´, ì˜ˆë°© ì•½ë¬¼ì„ íˆ¬ì—¬í•˜ê³  ì•Œë ˆë¥´ê¸° ìœ ë°œ ê°€ëŠ¥ì„±ì´ ë‚®ì€ ì•½ì œë§Œ ì„ ë³„í•˜ì—¬ ì‚¬ìš©í•©ë‹ˆë‹¤." },
        { id: 'src_154', cat: 'respi', lvl: 'warn', label: 'COVID-19 ê°ì—¼ë ¥', sub: 'Src 154-155', med: "COVID-19 ê°ì—¼ë ¥.\n[Guideline] í™•ì§„ í›„ 7ì£¼ ì´í›„ ì •ê·œ ìˆ˜ìˆ  ê¶Œì¥. ì¡°ê¸° ìˆ˜ìˆ  ì‹œ Post-op pulmonary cx ì¦ê°€ ìœ„í—˜ ì„¤ëª….", pat: "ì½”ë¡œë‚˜ ê°ì—¼ë ¥ í™•ì¸. í ê¸°ëŠ¥ íšŒë³µì„ ìœ„í•´ í™•ì§„ í›„ 7ì£¼ ì´í›„ ìˆ˜ìˆ ì„ ê¶Œì¥í•˜ë©°, ë¶ˆê°€í”¼í•œ ê²½ìš° í˜¸í¡ê¸° í•©ë³‘ì¦ ê´€ë¦¬ë¥¼ ì² ì €íˆ í•©ë‹ˆë‹¤." },
        { id: 'src_156', cat: 'special', lvl: 'info', label: 'ìˆ˜ìˆ  ê³„íš/ìì„¸', sub: 'Src 156', med: "OP Level, Position, Line, IOM í•„ìš”ì„± í™•ì¸.", pat: "ìˆ˜ìˆ  ìì„¸ì™€ í•„ìš”í•œ ëª¨ë‹ˆí„°ë§ ì¥ë¹„ë¥¼ í™•ì¸í–ˆìŠµë‹ˆë‹¤." },
        { id: 'src_157', cat: 'special', lvl: 'info', label: 'ì¶œìƒë ¥ (ì†Œì•„)', sub: 'Src 157 (<15y)', med: "Pediatric Hx: ë¯¸ìˆ™ì•„/ë§Œì‚­ì•„ ì—¬ë¶€, ì¶œìƒ ì²´ì¤‘, ì„ ì²œì„± ê¸°í˜•(Congenital anomalies) í™•ì¸.", pat: "ì¶œìƒ ì‹œ ë³‘ë ¥ê³¼ ì„ ì²œì„± ì§ˆí™˜ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ì—¬ ì†Œì•„ ë§ˆì·¨ ê³„íšì„ ìˆ˜ë¦½í•©ë‹ˆë‹¤." },
        { id: 'src_158', cat: 'hepatic', lvl: 'warn', label: 'ì§§ì€ ìˆ˜ìˆ  ê°„ê²©', sub: 'Src 158-160', med: "ë°˜ë³µì ì¸ ë§ˆì·¨(Repeated Anesthesia).\n[Stoelting] ì•½ë¬¼ ì¶•ì  ë° ê°„/ì‹ ì¥ ê¸°ëŠ¥ íšŒë³µ ì—¬ë¶€ í™•ì¸. Halothane hepatitis ìœ„í—˜(ê³¼ê±°ë ¥).", pat: "ì¦ì€ ìˆ˜ìˆ ê³¼ ë§ˆì·¨ë¡œ ì¸í•œ ê°„/ì‹ ì¥ ë¶€ë‹´ì„ ê³ ë ¤í•˜ì—¬ ì•½ë¬¼ ìš©ëŸ‰ì„ ì¡°ì ˆí•©ë‹ˆë‹¤." },
        { id: 'src_161', cat: 'special', lvl: 'warn', label: 'ì¹˜ì•„ ì†ìƒ ìœ„í—˜', sub: 'Src 161-162', med: "ì¹˜ì•„ í”ë“¤ë¦¼/ì†ìƒ ìœ„í—˜.\nê¸°ì¡´ ì†ìƒ ë¶€ìœ„ ê¸°ë¡(Document). Tooth protector ì ìš©. í›„ë‘ê²½ ì¡°ì‘ ì‹œ ì£¼ì˜.", pat: "í”ë“¤ë¦¬ëŠ” ì¹˜ì•„ê°€ ìˆì–´ ë§ˆì·¨ ì¤‘ ì¹˜ì•„ ë³´í˜¸ ì¥ë¹„ë¥¼ ì°©ìš©í•˜ê³  ì†ìƒë˜ì§€ ì•Šë„ë¡ ê°ë³„íˆ ì£¼ì˜í•©ë‹ˆë‹¤." },

        // --- Cardiovascular (Old Age, HTN, Arrhythmia, IHD) ---
        { id: 'src_163', cat: 'cardio', lvl: 'warn', label: 'ê³ ë ¹ (Old Age) - ì‹¬ì¥', sub: 'Src 163, 165', med: "ê³ ë ¹(Old Age) > 4METs.\n[Stoelting] í˜ˆê´€/ì‹¬ì¥ì˜ ê²½ì§ë„ ì¦ê°€. ìˆ˜ìš©ì²´ ë¯¼ê°ë„ ê°ì†Œ. ìˆ˜ìˆ  ì „í›„ ì‹¬í˜ˆê´€ í•©ë³‘ì¦ ê³ ìœ„í—˜êµ°.", pat: "ê³ ë ¹ìœ¼ë¡œ ì¸í•œ ì‹¬í˜ˆê´€ ê¸°ëŠ¥ ì €í•˜ ê°€ëŠ¥ì„±ì´ ìˆì–´ ìˆ˜ìˆ  ì¤‘ ì‹¬ì¥ ë¶€ë‹´ì„ ìµœì†Œí™”í•˜ëŠ” ë§ˆì·¨ ë°©ë²•ì„ ì„ íƒí•©ë‹ˆë‹¤." },
        { id: 'src_164', cat: 'respi', lvl: 'warn', label: 'ê³ ë ¹ (Old Age) - í', sub: 'Src 164', med: "ê³ ë ¹ í ê¸°ëŠ¥ ì €í•˜.\n[Stoelting] í íƒ„ì„± ë° í‰ë²½ ìœ ìˆœë„ ê°ì†Œ. ë¬´ê¸°í(Atelectasis) ë° íë ´ ìœ„í—˜ ì¦ê°€.", pat: "ë‚˜ì´ê°€ ë“œì‹œë©´ í íƒ„ë ¥ì´ ì¤„ì–´ë“¤ì–´ ìˆ˜ìˆ  í›„ íë ´ ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤. í˜¸í¡ í›ˆë ¨ê³¼ ê°€ë˜ ë°°ì¶œì„ ë„ì™€ë“œë¦½ë‹ˆë‹¤." },
        { id: 'src_166', cat: 'cardio', lvl: 'warn', label: 'ê³ í˜ˆì•• (HTN)', sub: 'Src 166-167', med: "ê³ í˜ˆì•• ì•½ë¬¼.\n[Stoelting] ACEi/ARBëŠ” ìˆ˜ìˆ  24ì‹œê°„ ì „ ì¤‘ë‹¨(Vasoplegic syndrome ì˜ˆë°©). Beta-blockerëŠ” ìœ ì§€. BP < 140/90 ìœ ì§€ ëª©í‘œ.", pat: "í˜ˆì••ì•½ ì¤‘ ì¼ë¶€(ARB/ACEi)ëŠ” ë§ˆì·¨ ì¤‘ ì €í˜ˆì•• ìœ„í—˜ì´ ìˆì–´ ìˆ˜ìˆ  ì „ë‚ ë¶€í„° ì¤‘ë‹¨í•©ë‹ˆë‹¤. ë‚˜ë¨¸ì§€ ì•½ì€ ë³µìš©í•˜ì„¸ìš”." },
        { id: 'src_168', cat: 'cardio', lvl: 'warn', label: 'í˜ˆì—­í•™ì  ë¶ˆì•ˆì •', sub: 'Src 168-170', med: "Hemodynamic Instability Risk.\n[Stoelting] ë¹ˆë§¥(Tachycardia) íšŒí”¼(O2 demand ì¦ê°€). ì •ìƒ ë™ìœ¨ë™(Sinus Rhythm) ìœ ì§€. MI/HF ìœ„í—˜.", pat: "ìˆ˜ìˆ  ì¤‘ í˜ˆì••ê³¼ ì‹¬ë°•ìˆ˜ê°€ í”ë“¤ë¦¬ì§€ ì•Šë„ë¡ ì •ë°€ ê°ì‹œí•˜ë©° ì‹¬ì¥ ë¶€ë‹´ì„ ì¤„ì´ê² ìŠµë‹ˆë‹¤." },
        { id: 'src_171', cat: 'cardio', lvl: 'crt', label: 'í˜‘ì‹¬ì¦/PCI (Angina)', sub: 'Src 171-174', med: "PCI/Stent ì‹œìˆ ë ¥.\n[Stoelting] DES < 1ë…„: Stent Thrombosis ê³ ìœ„í—˜. BMS < 30ì¼: ìˆ˜ìˆ  ì—°ê¸° ì›ì¹™. í•­í˜ˆì†ŒíŒì œ ì¤‘ë‹¨(Bridging) ì—¬ë¶€ ìˆœí™˜ê¸°ë‚´ê³¼ í˜‘ì§„ í™•ì¸.", pat: "ìŠ¤í…íŠ¸ ì‹œìˆ  ê³¼ê±°ë ¥ì´ ìˆì–´ í˜ˆì „ ë°œìƒ ìœ„í—˜ì´ í½ë‹ˆë‹¤. ì‹¬ì¥ë‚´ê³¼ì™€ í˜‘ì˜ í•˜ì— ê°€ì¥ ì•ˆì „í•œ ì‹œê¸°ì™€ ë°©ë²•ìœ¼ë¡œ ìˆ˜ìˆ í•©ë‹ˆë‹¤." },
        { id: 'src_175', cat: 'cardio', lvl: 'crt', label: 'BMS ì‚½ì… í™˜ì', sub: 'Src 175-176', med: "BMS ì‚½ì… < 2ê°œì›”.\n[Guideline] ë¹„ì‹¬ì¥ ìˆ˜ìˆ  ì‹œ ìµœì†Œ 30ì¼ ì—°ê¸° í•„ìš”.", pat: "ê¸ˆì† ìŠ¤í…íŠ¸ ì‹œìˆ  í›„ ê¸°ê°„ì´ ì§§ì•„ ìˆ˜ìˆ  ì—°ê¸°ê°€ ì›ì¹™ì´ë‚˜, ì‘ê¸‰ ì‹œ í˜ˆì „ ìœ„í—˜ì„ ê°ìˆ˜í•˜ê³  ì§„í–‰í•©ë‹ˆë‹¤." },

        // --- Respiratory (Tb, Asthma) ---
        { id: 'src_177', cat: 'respi', lvl: 'crt', label: 'ê²°í•µ ì˜ì‹¬ (Tb)', sub: 'Src 177-181', med: "í™œë™ì„± ê²°í•µ(Active Tb) ê°ë³„.\n[Protocol] Sputum AFB x3 & PCR. í™œë™ì„± í™•ì¸ ì‹œ: ìˆ˜ìˆ  ì—°ê¸°(ìµœì†Œ 2ì£¼ íˆ¬ì•½ í›„). ìˆ˜ìˆ ë°© ë§ˆì§€ë§‰ ìˆœì„œ ë°°ì •.", pat: "í™œë™ì„± ê²°í•µ ì—¬ë¶€ë¥¼ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ì „ì—¼ë ¥ì´ ìˆë‹¤ë©´ ì¹˜ë£Œ í›„ ìˆ˜ìˆ í•˜ë©°, ê°ì—¼ ê´€ë¦¬ë¥¼ ìœ„í•´ ê²©ë¦¬ ìˆ˜ìˆ ì‹¤ì„ ì‚¬ìš©í•©ë‹ˆë‹¤." },
        { id: 'src_182', cat: 'respi', lvl: 'warn', label: 'ì²œì‹ (Asthma)', sub: 'Src 182-184', med: "ê¸°ê´€ì§€ ì²œì‹.\n[Stoelting] Inhaler ì§€ì°¸. Deep extubation ë˜ëŠ” Fully awake ë°œê´€ ê³ ë ¤. Histamine ìœ ë¦¬ ì•½ì œ íšŒí”¼. í•„ìš”ì‹œ Steroid ì „ì²˜ì¹˜.", pat: "ì²œì‹ ë°œì‘ ì˜ˆë°©ì„ ìœ„í•´ ì“°ì‹œë˜ í¡ì…ê¸°ë¥¼ ì¤€ë¹„í•´ ì£¼ì„¸ìš”. ë§ˆì·¨ ìœ ë„ ì‹œ ê¸°ê´€ì§€ ìˆ˜ì¶•ì„ ë§‰ëŠ” ì•½ì œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤." },

        // --- Hepatic (LFT, LC) ---
        { id: 'src_185', cat: 'hepatic', lvl: 'warn', label: 'ê°„ìˆ˜ì¹˜ ìƒìŠ¹', sub: 'Src 185-187', med: "LFT ìƒìŠ¹ / Bí˜• ê°„ì—¼ ë³´ê· ì.\n[Stoelting] ë§ˆì·¨ì œ ëŒ€ì‚¬ ì˜í–¥ ê³ ë ¤. ê°„í˜ˆë¥˜ ê°ì†Œ ìµœì†Œí™” ë§ˆì·¨ ìœ ì§€.", pat: "ê°„ ìˆ˜ì¹˜ê°€ ë†’ì•„ ê°„ì— ë¶€ë‹´ì´ ì ì€ ë§ˆì·¨ì œë¥¼ ì„ íƒí•˜ê³  ìˆ˜ìˆ  í›„ ê°„ ê¸°ëŠ¥ì„ ì¶”ì  ê´€ì°°í•©ë‹ˆë‹¤." },
        { id: 'src_188', cat: 'hepatic', lvl: 'crt', label: 'ê°„ê²½ë³€ (LC)', sub: 'Src 188-191', med: "ê°„ê²½ë³€(Liver Cirrhosis).\n[Stoelting] Child-Pugh ë“±ê¸‰ í™•ì¸. Coagulopathy(PT/PLT) êµì •. ë³µìˆ˜(Ascites) í™•ì¸. ì‹ë„ì •ë§¥ë¥˜(Varix) ì‹œ NGT ì‚½ì… ê¸ˆê¸°.", pat: "ê°„ê²½í™”ë¡œ ì¸í•œ ì§€í˜ˆ ì¥ì• ì™€ ë³µìˆ˜ ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤. ì‹ë„ ì •ë§¥ë¥˜ íŒŒì—´ì„ ì£¼ì˜í•˜ë©° ìˆ˜í˜ˆì„ ì¤€ë¹„í•©ë‹ˆë‹¤." },

        // --- Renal (UA, CKD, HD) ---
        { id: 'src_192', cat: 'renal', lvl: 'warn', label: 'ì†Œë³€ê²€ì‚¬ ì´ìƒ', sub: 'Src 192-195', med: "ë‹¨ë°±ë‡¨/í˜ˆë‡¨(Proteinuria/Hematuria).\nê¸°ì € ì‹ ì¥ì§ˆí™˜(Renal disease) ê°ë³„ í•„ìš”. ìˆ˜ì•¡ ìš”ë²• ì£¼ì˜.", pat: "ì†Œë³€ ê²€ì‚¬ ì´ìƒ ì†Œê²¬ì´ ìˆì–´ ì‹ ì¥ ê¸°ëŠ¥ì„ ë³´í˜¸í•˜ëŠ” ìˆ˜ì•¡ ìš”ë²•ì„ ì‹œí–‰í•©ë‹ˆë‹¤." },
        { id: 'src_196', cat: 'renal', lvl: 'crt', label: 'íˆ¬ì„ í™˜ì (ESRD)', sub: 'Src 196-199', med: "í˜ˆì•¡íˆ¬ì„(HD) í™˜ì.\n[Stoelting] ìˆ˜ìˆ  24ì‹œê°„ ì „ íˆ¬ì„. ìˆ˜ìˆ  ë‹¹ì¼ K+ ë° Volume í™•ì¸. ë™ì •ë§¥ë£¨(AVF) íŒ” ë³´í˜¸. ìœ„ë°°ì¶œì§€ì—°(RSI) ê³ ë ¤.", pat: "ìˆ˜ìˆ  ì „ë‚  íˆ¬ì„ì„ ì™„ë£Œí•´ì•¼ í•©ë‹ˆë‹¤. ë™ì •ë§¥ë£¨ê°€ ìˆëŠ” íŒ”ì„ ë³´í˜¸í•˜ê³  ì¹¼ë¥¨ ìˆ˜ì¹˜ë¥¼ í™•ì¸í•©ë‹ˆë‹¤." },
        { id: 'src_200', cat: 'renal', lvl: 'crt', label: 'ê³ ì¹¼ë¥¨í˜ˆì¦ (HyperK)', sub: 'Src 200-203', med: "ê³ ì¹¼ë¥¨í˜ˆì¦ (K > 5.0).\n[Stoelting] ì¹˜ëª…ì  ë¶€ì •ë§¥ ìœ„í—˜. Succinylcholine ê¸ˆê¸°. Tx: Insulin/Glucose, Calcium gluconate.", pat: "ì¹¼ë¥¨ ìˆ˜ì¹˜ê°€ ë†’ìœ¼ë©´ ì‹¬ì¥ì— ì¹˜ëª…ì ì¼ ìˆ˜ ìˆì–´ ì‘ê¸‰ ì²˜ì¹˜ë¡œ ìˆ˜ì¹˜ë¥¼ ë‚®ì¶˜ í›„ ìˆ˜ìˆ í•©ë‹ˆë‹¤." },

        // --- Endocrine (DM, Steroid, Adrenal, Thyroid) ---
        { id: 'src_204', cat: 'endo', lvl: 'warn', label: 'ë‹¹ë‡¨ (DM)', sub: 'Src 204-207', med: "ë‹¹ë‡¨(Diabetes Mellitus).\n[Stoelting] ëª©í‘œ í˜ˆë‹¹ 120-180. ê²½êµ¬ì•½/ì¸ìŠë¦° ë‹¹ì¼ ì•„ì¹¨ ì¤‘ë‹¨. ë¬´í†µì„± ì‹¬ê·¼í—ˆí˜ˆ(Silent MI) ì£¼ì˜. ìœ„ë¬´ë ¥ì¦(Gastroparesis) ê°€ëŠ¥ì„±.", pat: "í˜ˆë‹¹ ì¡°ì ˆê³¼ ì €í˜ˆë‹¹ ë°©ì§€ì— ì£¼ë ¥í•©ë‹ˆë‹¤. ë‹¹ë‡¨ í•©ë³‘ì¦ìœ¼ë¡œ ì¸í•œ ì‹¬ì¥ ë° ìœ„ì¥ê´€ ìœ„í—˜ì„ ëŒ€ë¹„í•©ë‹ˆë‹¤." },
        { id: 'src_208', cat: 'endo', lvl: 'warn', label: 'ìŠ¤í…Œë¡œì´ë“œ ë³µìš©ë ¥', sub: 'Src 208-210', med: "ìŠ¤í…Œë¡œì´ë“œ ì¥ê¸° ë³µìš©.\n[Stoelting] HPA Axis ì–µì œ ê°€ëŠ¥ì„±. ë¶€ì‹  ìœ„ê¸°(Adrenal crisis) ì˜ˆë°© ìœ„í•´ Stress dose Hydrocortisone íˆ¬ì—¬.", pat: "ì¥ê¸°ê°„ ìŠ¤í…Œë¡œì´ë“œ ë³µìš©ìœ¼ë¡œ ìˆ˜ìˆ  ìŠ¤íŠ¸ë ˆìŠ¤ ëŒ€ì²˜ ëŠ¥ë ¥ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆì–´ í˜¸ë¥´ëª¬ ë³´ì¶© ì£¼ì‚¬ë¥¼ íˆ¬ì—¬í•©ë‹ˆë‹¤." },
        { id: 'src_212', cat: 'endo', lvl: 'warn', label: 'ì•Œë„ìŠ¤í…Œë¡ ì¦', sub: 'Src 212', med: "ì¼ì°¨ì„± ì•Œë„ìŠ¤í…Œë¡ ì¦.\nê³ í˜ˆì•• ë° ì €ì¹¼ë¥¨í˜ˆì¦(Hypokalemia) êµì •. Spironolactone ë³µìš© í™•ì¸.", pat: "ê³ í˜ˆì••ê³¼ ì „í•´ì§ˆ ë¶ˆê· í˜•(ì €ì¹¼ë¥¨)ì„ êµì •í•˜ë©° ë§ˆì·¨ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤." },
        { id: 'src_213', cat: 'endo', lvl: 'crt', label: 'ë¶€ì‹  ì¢…ì–‘ (Incidentaloma)', sub: 'Src 213-214', med: "ë¶€ì‹  ì¢…ì–‘ (ê°ˆìƒ‰ì„¸í¬ì¢… ê°ë³„).\n[Stoelting] ê¸°ëŠ¥ì„± ì¢…ì–‘ì¼ ê²½ìš° Phenoxybenzamine ì „ì²˜ì¹˜ í•„ìˆ˜. ìˆ˜ìˆ  ì¤‘ ì‹¬í•œ ê³ í˜ˆì••/ì €í˜ˆì•• ìœ„ê¸° ì£¼ì˜.", pat: "ë¶€ì‹  ì¢…ì–‘ì˜ í˜¸ë¥´ëª¬ ë¶„ë¹„ ê°€ëŠ¥ì„±ì„ ì—¼ë‘ì— ë‘ê³  í˜ˆì•• ê¸‰ë³€ì— ëŒ€ë¹„í•œ ì •ë°€ ê°ì‹œë¥¼ ì‹œí–‰í•©ë‹ˆë‹¤." },
        { id: 'src_215', cat: 'endo', lvl: 'warn', label: 'ë‡Œí•˜ìˆ˜ì²´ ì„ ì¢…', sub: 'Src 215', med: "ë‡Œí•˜ìˆ˜ì²´ ì„ ì¢…(Pituitary Adenoma).\ní˜¸ë¥´ëª¬ ìƒíƒœ(ACTH, TSH) í™•ì¸. ì‹œì•¼ ê²°ì†(Visual field defect) í™•ì¸.", pat: "í˜¸ë¥´ëª¬ ë¶ˆê· í˜• ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  ìˆ˜ìˆ  ì „í›„ í˜¸ë¥´ëª¬ ìˆ˜ì¹˜ë¥¼ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤." },
        { id: 'src_216', cat: 'endo', lvl: 'warn', label: 'ê°‘ìƒì„  ì§ˆí™˜', sub: 'Src 216-221', med: "ê°‘ìƒì„  ì§ˆí™˜.\n[Stoelting] ì •ìƒ ê¸°ëŠ¥(Euthyroid) ìƒíƒœ í™•ì¸. í•­ì§„ì¦: Thyroid Storm ì£¼ì˜. ì €í•˜ì¦: íšŒë³µ ì§€ì—° ì£¼ì˜.", pat: "ê°‘ìƒì„  ìˆ˜ì¹˜ê°€ ì •ìƒì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤. ìˆ˜ì¹˜ ì´ìƒ ì‹œ ê°‘ìƒì„  í­í’ì´ë‚˜ íšŒë³µ ì§€ì—° ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤." },

        // --- Fever / Hematologic ---
        { id: 'src_222', cat: 'infect', lvl: 'warn', label: 'ë°œì—´ (Fever)', sub: 'Src 222-225', med: "ë°œì—´ ì›ì¸ ê°ë³„.\n[Stoelting] ëŒ€ì‚¬ëŸ‰ í•­ì§„(Hypermetabolic state). ì‚°ì†Œ ìš”êµ¬ëŸ‰ ì¦ê°€. íƒˆìˆ˜ êµì • í•„ìš”.", pat: "ë°œì—´ ì›ì¸ì„ í™•ì¸í•˜ê³ , íƒˆìˆ˜ êµì • ë° ì²´ì˜¨ ì¡°ì ˆì— ìœ ì˜í•©ë‹ˆë‹¤. ê°ì—¼ ì•…í™” ê°€ëŠ¥ì„±ì„ ì„¤ëª…í•©ë‹ˆë‹¤." },
        { id: 'src_226', cat: 'heme', lvl: 'warn', label: 'ë¹ˆí˜ˆ (Anemia)', sub: 'Src 226-227', med: "ë¹ˆí˜ˆ.\n[Stoelting] ìˆ˜í˜ˆ ê¸°ì¤€(Transfusion trigger) ì„¤ì •(Hb < 7-8 or ì‹¬ì¥ì§ˆí™˜). ìˆ˜í˜ˆ ì¤€ë¹„.", pat: "ë¹ˆí˜ˆë¡œ ì¸í•œ ì‚°ì†Œ ê³µê¸‰ ì €í•˜ë¥¼ ë§‰ê¸° ìœ„í•´ í•„ìš”ì‹œ ìˆ˜í˜ˆì„ ì¤€ë¹„í•©ë‹ˆë‹¤." },
        { id: 'src_228', cat: 'heme', lvl: 'warn', label: 'ì‘ê³ ì¥ì•  (PT ì—°ì¥)', sub: 'Src 228-230', med: "ì‘ê³ ì¥ì• (Coagulopathy).\në¹„íƒ€ë¯¼ K ê²°í• vs ê°„ì§ˆí™˜ ê°ë³„. ì²™ì¶”ë§ˆì·¨ ì‹œ êµì • í•„ìš”(Correction).", pat: "ì§€í˜ˆì´ ì˜ ì•ˆ ë  ìˆ˜ ìˆì–´ ì²™ì¶” ë§ˆì·¨ ì‹œ ì£¼ì˜ê°€ í•„ìš”í•˜ë©°, í˜ˆì•¡ ì‘ê³  ì¸ìë¥¼ ë³´ì¶©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." },
        { id: 'src_231', cat: 'heme', lvl: 'warn', label: 'ë‹¤ë°œì„± ê³¨ìˆ˜ì¢… (MM)', sub: 'Src 231-232', med: "ë‹¤ë°œì„± ê³¨ìˆ˜ì¢….\nì‹ ë¶€ì „(Renal failure), ê³ ì¹¼ìŠ˜í˜ˆì¦(Hypercalcemia), ë³‘ì  ê³¨ì ˆ(Pathologic fracture) ì£¼ì˜(Positioning).", pat: "ë¼ˆê°€ ì•½í•´ ê³¨ì ˆ ìœ„í—˜ì´ ìˆìœ¼ë¯€ë¡œ ìˆ˜ìˆ  ìì„¸ë¥¼ ì¡ì„ ë•Œ ê°ë³„íˆ ì£¼ì˜í•©ë‹ˆë‹¤." },

        // --- Rheumatologic ---
        { id: 'src_233', cat: 'special', lvl: 'crt', label: 'ë¥˜ë§ˆí‹°ìŠ¤ ê´€ì ˆì—¼ (RA)', sub: 'Src 233, 236', med: "ë¥˜ë§ˆí‹°ìŠ¤ ê´€ì ˆì—¼.\n[Stoelting] ê²½ì¶”(Atlanto-axial) ë¶ˆì•ˆì •ì„± í™•ì¸. í„±ê´€ì ˆ(TMJ) ì œí•œ. ê¸°ë„ ì‚½ê´€ ê³¤ë€(Difficult Intubation) ëŒ€ë¹„.", pat: "ëª© ê´€ì ˆ ë¶ˆì•ˆì •ì„±ì´ ìˆì„ ìˆ˜ ìˆì–´, ëª©ì„ ì –íˆì§€ ì•Šê³  íŠ¹ìˆ˜ ì¥ë¹„ë¡œ ê¸°ë„ ì‚½ê´€ì„ ì‹œí–‰í•©ë‹ˆë‹¤." },
        { id: 'src_234', cat: 'special', lvl: 'warn', label: 'ë£¨í‘¸ìŠ¤ (SLE)', sub: 'Src 234-240', med: "ì „ì‹ í™ë°˜ë£¨í‘¸ìŠ¤(SLE).\në‹¤ê¸°ê´€ ì¹¨ë²”(ì‹ ì¥, ì‹¬ì¥, í) í™•ì¸. ìŠ¤í…Œë¡œì´ë“œ ì „ì²˜ì¹˜(Coverage) í•„ìš”ì„± í‰ê°€.", pat: "ì „ì‹  ì—¼ì¦ ë°˜ì‘ê³¼ ì‹ ì¥/ì‹¬ì¥ ì¹¨ë²” ê°€ëŠ¥ì„±ì„ ê³ ë ¤í•˜ì—¬ ë§ˆì·¨ ê³„íšì„ ì„¸ì›ë‹ˆë‹¤." },
        { id: 'src_242', cat: 'cardio', lvl: 'warn', label: 'ê°€ì™€ì‚¬í‚¤ë³‘ (Kawasaki)', sub: 'Src 242-243', med: "ê°€ì™€ì‚¬í‚¤ë³‘ ê³¼ê±°ë ¥.\nê´€ìƒë™ë§¥ë¥˜(Coronary aneurysm) í™•ì¸. í—ˆí˜ˆì„± ì‹¬ì§ˆí™˜(IHD)ì— ì¤€í•˜ì—¬ ê´€ë¦¬.", pat: "ì‹¬ì¥ í˜ˆê´€ í›„ìœ ì¦ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  ì„±ì¸ ì‹¬ì¥ ì§ˆí™˜ì— ì¤€í•˜ì—¬ ê´€ë¦¬í•©ë‹ˆë‹¤." },
        
        // --- Cancer / Neurologic ---
        { id: 'src_244', cat: 'heme', lvl: 'warn', label: 'í•­ì•”/ë°©ì‚¬ì„  ì¹˜ë£Œë ¥', sub: 'Src 244-245', med: "í•­ì•”/ë°©ì‚¬ì„  ì¹˜ë£Œë ¥.\n[Stoelting] Adriamycin(ì‹¬ë…ì„±), Bleomycin(íë…ì„±). ê³¨ìˆ˜ ì–µì œ(Pancytopenia) í™•ì¸.", pat: "ê³¼ê±° í•­ì•” ì¹˜ë£Œë¡œ ì¸í•œ ì‹¬ì¥/í ê¸°ëŠ¥ ì €í•˜ ë° ë©´ì—­ë ¥ ì €í•˜ ê°€ëŠ¥ì„±ì„ í‰ê°€í•©ë‹ˆë‹¤." },
        { id: 'src_246', cat: 'neuro', lvl: 'warn', label: 'ë‡Œì¡¸ì¤‘ (Stroke/CVA)', sub: 'Src 246-249', med: "ë‡Œì¡¸ì¤‘ ê³¼ê±°ë ¥.\n[Stoelting] ë‡Œí˜ˆê´€ ìë™ì¡°ì ˆëŠ¥(Autoregulation) ì†ìƒ. í˜ˆì••ì„ ê¸°ì €ì¹˜(Baseline)ì˜ 20% ë‚´ë¡œ ìœ ì§€.", pat: "ë‡Œí˜ˆê´€ ìë™ ì¡°ì ˆ ëŠ¥ë ¥ì´ ë–¨ì–´ì ¸ ìˆì„ ìˆ˜ ìˆì–´, í˜ˆì••ì„ í‰ì†Œ ìˆ˜ì¤€ìœ¼ë¡œ ì¼ì •í•˜ê²Œ ìœ ì§€í•©ë‹ˆë‹¤." },
        { id: 'src_250', cat: 'neuro', lvl: 'crt', label: 'ì¤‘ì¦ê·¼ë¬´ë ¥ì¦ (MG)', sub: 'Src 250-253', med: "ì¤‘ì¦ê·¼ë¬´ë ¥ì¦(MG).\n[Stoelting] ê·¼ì´ì™„ì œ(NMB) ë¯¼ê°ë„ ì¦ê°€. ìˆ˜ìˆ  í›„ ì¸ê³µí˜¸í¡ê¸° ì´íƒˆ(Weaning) ê³¤ë€ ìœ„í—˜.", pat: "ê·¼ìœ¡ ì´ì™„ì œ ì‚¬ìš©ì„ ìµœì†Œí™”í•˜ë©°, ìˆ˜ìˆ  í›„ ìê°€ í˜¸í¡ íšŒë³µì´ ëŠ¦ì–´ì§ˆ ìˆ˜ ìˆì–´ ì¤‘í™˜ìì‹¤ ì¹˜ë£Œë¥¼ ëŒ€ë¹„í•©ë‹ˆë‹¤." },
        { id: 'src_254', cat: 'neuro', lvl: 'warn', label: 'í‰ì„ ì¢… (Thymoma)', sub: 'Src 254-259', med: "í‰ì„ ì¢….\nê¸°ë„ ì••ë°•(Airway compression) í™•ì¸. ê·¼ë¬´ë ¥ì¦(MG) ë™ë°˜ ì—¬ë¶€ í™•ì¸.", pat: "ì¢…ì–‘ì´ ê¸°ë„ë¥¼ ëˆ„ë¥´ëŠ”ì§€ í™•ì¸í•˜ê³  ê·¼ë¬´ë ¥ì¦ ë™ë°˜ ì—¬ë¶€ë¥¼ í‰ê°€í•©ë‹ˆë‹¤." },

        // --- Trauma / Orthopedic ---
        { id: 'src_260', cat: 'special', lvl: 'crt', label: 'ì•ˆë©´ ê³¨ì ˆ (Facial Fx)', sub: 'Src 260-266', med: "ì•ˆë©´ ê³¨ì ˆ(Zygoma/Mandible Fx).\n[Stoelting] ê¸°ë„ ì‚½ê´€ ê³¤ë€. ê°œêµ¬ ì¥ì•  ì‹œ Awake Fiberoptic Intubation ê³ ë ¤.", pat: "ì•ˆë©´ ê³¨ì ˆë¡œ ì… ë²Œë¦¬ê¸°ê°€ í˜ë“¤ë©´ ê¹¨ì–´ìˆëŠ” ìƒíƒœì—ì„œ íŠ¹ìˆ˜ ë‚´ì‹œê²½ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ê¸°ë„ ì‚½ê´€ì„ í•©ë‹ˆë‹¤." },
        { id: 'src_267', cat: 'neuro', lvl: 'crt', label: 'ê²½ì¶” ì†ìƒ (C-spine)', sub: 'Src 267-271', med: "ê²½ì¶” ë””ìŠ¤í¬/ê³¨ì ˆ.\nëª© ì‹ ì „(Neck extension) ê¸ˆì§€. Videolaryngoscope ì‚¬ìš©. ì‹ ê²½í•™ì  ëª¨ë‹ˆí„°ë§.", pat: "ëª© ì‹ ê²½ ì†ìƒì„ ë§‰ê¸° ìœ„í•´ ëª©ì„ ì›€ì§ì´ì§€ ì•Šê³  íŠ¹ìˆ˜ ì¥ë¹„ë¥¼ ì‚¬ìš©í•´ ë§ˆì·¨ë¥¼ ìœ ë„í•©ë‹ˆë‹¤." },
        { id: 'src_272', cat: 'respi', lvl: 'warn', label: 'ì²™ì¶”ì¸¡ë§Œì¦ (Scoliosis)', sub: 'Src 272-276', med: "ì²™ì¶”ì¸¡ë§Œì¦.\nì œí•œì„± íì§ˆí™˜(Restrictive Lung Disease). íê¸°ëŠ¥ê²€ì‚¬(PFT) í™•ì¸. íì‹¬ì¥ì¦(Cor Pulmonale) ìœ„í—˜.", pat: "ì‹¬í•œ ì¸¡ë§Œì¦ì€ í ê¸°ëŠ¥ì„ ë–¨ì–´ëœ¨ë¦´ ìˆ˜ ìˆì–´ ìˆ˜ìˆ  ì¤‘ í˜¸í¡ ê´€ë¦¬ì— ìœ ì˜í•©ë‹ˆë‹¤." },

        // --- Psych / Obesity / Special ---
        { id: 'src_277', cat: 'neuro', lvl: 'warn', label: 'ìš°ìš¸ì¦ (MDD)', sub: 'Src 277-280', med: "ìš°ìš¸ì¦.\nì•½ë¬¼ ìƒí˜¸ì‘ìš©(TCA/MAOi). ìˆ˜ìˆ  í›„ ì„¬ë§(Delirium) ìœ„í—˜.", pat: "ë³µìš© ì¤‘ì¸ ì •ì‹ ê³¼ ì•½ë¬¼ì„ ê³ ë ¤í•˜ì—¬ ë§ˆì·¨ì œë¥¼ ì„ íƒí•˜ê³  ìˆ˜ìˆ  í›„ ì„¬ë§ ë°œìƒì„ ì£¼ì˜ ê¹Šê²Œ ê´€ì°°í•©ë‹ˆë‹¤." },
        { id: 'src_281', cat: 'special', lvl: 'warn', label: 'ê³ ë„ ë¹„ë§Œ (BMI>35)', sub: 'Src 281-284', med: "ê³ ë„ ë¹„ë§Œ.\n[Stoelting] ë¹ ë¥¸ ì‚°ì†Œí¬í™”ë„ ì €í•˜(FRC ê°ì†Œ). ê¸°ë„ í™•ë³´ ê³¤ë€. ìˆ˜ë©´ë¬´í˜¸í¡(OSA) ë™ë°˜ ê°€ëŠ¥ì„±.", pat: "ì²´ì¤‘ì´ ë§ì´ ë‚˜ê°€ì‹œë©´ ì‚°ì†Œ ìˆ˜ì¹˜ê°€ ë¹¨ë¦¬ ë–¨ì–´ì§ˆ ìˆ˜ ìˆì–´ ì‚°ì†Œ ê³µê¸‰ê³¼ ê¸°ë„ í™•ë³´ì— ë§Œì „ì„ ê¸°í•©ë‹ˆë‹¤." },
        { id: 'src_285', cat: 'special', lvl: 'crt', label: 'ë¬´ìˆ˜í˜ˆ (JW)', sub: 'Src 285-286', med: "ì—¬í˜¸ì™€ì˜ ì¦ì¸.\n[Legal] ìˆ˜í˜ˆ ê±°ë¶€ ì›ì¹™ í™•ì¸. ANH / Cell saver ê°€ëŠ¥ ì—¬ë¶€. ì‚¬ë§ ìœ„í—˜ ê³ ì§€ ë° ë™ì˜ì„œ.", pat: "ë¬´ìˆ˜í˜ˆ ì›ì¹™ì„ ì¤€ìˆ˜í•˜ë˜, ëŒ€ëŸ‰ ì¶œí˜ˆ ì‹œ ìƒëª… ìœ„í—˜ì„±ì„ ê³ ì§€í•˜ê³  ìê°€ ìˆ˜í˜ˆ ë“± ëŒ€ì²´ ìš”ë²•ì„ ì¤€ë¹„í•©ë‹ˆë‹¤." },
        
        // --- Emergency / OBGY ---
        { id: 'src_288', cat: 'special', lvl: 'warn', label: 'ì œì™•ì ˆê°œ (C-sec)', sub: 'Src 288-290', med: "ì œì™•ì ˆê°œ.\nëŒ€ë™ë§¥-ëŒ€ì •ë§¥ ì••ë°•(Aortocaval compression). í¡ì¸ ìœ„í—˜. ì²™ì¶”ë§ˆì·¨(Neuraxial anesthesia) ì„ í˜¸.", pat: "ì„ì‹ ë¶€ì™€ íƒœì•„ì˜ ì•ˆì „ì„ ìœ„í•´ ì²™ì¶” ë§ˆì·¨ë¥¼ ì„ í˜¸í•˜ë©°, í˜ˆì•• ì €í•˜ì™€ ìŒì‹ë¬¼ ì—­ë¥˜ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤." },
        { id: 'src_291', cat: 'special', lvl: 'crt', label: 'í›„ë‘ ë¯¸ì„¸ ìˆ˜ìˆ  (LMS)', sub: 'Src 291-293', med: "ì„±ëŒ€ í´ë¦½ ìˆ˜ìˆ (LMS).\nê¸°ë„ ê³µìœ (Shared Airway). ì¹˜ì•„ ì†ìƒ ìœ„í—˜. ë ˆì´ì € í™”ì¬ ìœ„í—˜ ì£¼ì˜.", pat: "ê¸°ë„ ì•ˆì„ ìˆ˜ìˆ í•˜ë¯€ë¡œ ë§ˆì·¨ê³¼ì™€ ì§‘ë„ì˜ê°€ ìˆ¨ê¸¸ì„ ê³µìœ í•©ë‹ˆë‹¤. ì¹˜ì•„ ë³´í˜¸ì™€ ë ˆì´ì € í™”ìƒ ì˜ˆë°©ì— ì£¼ì˜í•©ë‹ˆë‹¤." },
        { id: 'src_298', cat: 'special', lvl: 'crt', label: 'ì¤‘í™˜ìì‹¤ ì¬ì› (ICU)', sub: 'Src 298-299', med: "ICU ì¬ì› í™˜ì.\nì¸ê³µí˜¸í¡ê¸° ì„¤ì •(Ventilator setting) í™•ì¸. ìŠ¹ì••ì œ(Inotropes) ìœ ì§€.", pat: "ì¤‘í™˜ìì‹¤ ì¹˜ë£Œ ì—°ì¥ì„ ì—ì„œ í˜¸í¡ê¸°ì™€ ìŠ¹ì••ì œë¥¼ ìœ ì§€í•˜ë©° ì•ˆì „í•˜ê²Œ ìˆ˜ìˆ ì‹¤ë¡œ ì´ë™ ë° ê´€ë¦¬í•©ë‹ˆë‹¤." },
        { id: 'src_300', cat: 'special', lvl: 'crt', label: 'ì‘ê¸‰ ìˆ˜ìˆ  (Emergency)', sub: 'Src 300-304', med: "[Emergency] Full Stomach Risk.\nRSI(ì‹ ì† ë§ˆì·¨ ìœ ë„) í•„ìˆ˜. í™œë ¥ì§•í›„(V/S) ì•ˆì •í™” ìš°ì„ . ì™¸ìƒ í‰ê°€.", pat: "ì‘ê¸‰ ìˆ˜ìˆ ì€ ê¸ˆì‹ ì‹œê°„ì´ ë¶€ì¡±í•˜ì—¬ ìœ„ ë‚´ìš©ë¬¼ ì—­ë¥˜ ìœ„í—˜ì´ í½ë‹ˆë‹¤. ì‹ ì† ë§ˆì·¨ ìœ ë„ë²•ì„ ì‹œí–‰í•˜ì—¬ íë¥¼ ë³´í˜¸í•©ë‹ˆë‹¤." }
    ];

    // ============================================================
    // ENGINE CODE
    // ============================================================
    const cats = {
        'all': 'ì „ì²´', 'cardio': 'ì‹¬ì¥', 'respi': 'í˜¸í¡ê¸°', 'hepatic': 'ê°„/ì†Œí™”ê¸°',
        'renal': 'ì‹ ì¥', 'endo': 'ë‚´ë¶„ë¹„', 'neuro': 'ì‹ ê²½', 'heme': 'í˜ˆì•¡', 
        'infect': 'ê°ì—¼', 'special': 'íŠ¹ìˆ˜/ì‘ê¸‰'
    };
    
    let curCat = 'all';
    let selIds = new Set();

    // Init Tabs
    const tabBox = document.getElementById('tabs');
    Object.keys(cats).forEach(k => {
        const b = document.createElement('div');
        b.className = `tab ${k==='all'?'active':''}`;
        b.innerText = cats[k];
        b.onclick = () => { curCat = k; render(); updateTabs(); };
        tabBox.appendChild(b);
    });

    function updateTabs() {
        Array.from(tabBox.children).forEach(c => {
            c.classList.toggle('active', c.innerText === cats[curCat]);
        });
    }

    function render() {
        const listBox = document.getElementById('list');
        const filtered = curCat === 'all' ? masterData : masterData.filter(d => d.cat === curCat);
        
        listBox.innerHTML = filtered.map(d => `
            <div class="item ${selIds.has(d.id)?'selected':''}" onclick="toggle('${d.id}')">
                <div class="item-head">
                    <span class="item-title">${d.label}</span>
                    <span class="tag ${d.lvl}">${d.lvl.toUpperCase()}</span>
                </div>
                <div class="item-sub">${d.sub}</div>
            </div>
        `).join('');
    }

    function toggle(id) {
        if(selIds.has(id)) selIds.delete(id); else selIds.add(id);
        render();
        print();
    }

    function print() {
        const medBox = document.getElementById('outMed');
        const patBox = document.getElementById('outPat');
        
        if(selIds.size === 0) {
            medBox.innerHTML = '<div style="color:#9ca3af; text-align:center; padding-top:100px;">í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”.</div>';
            patBox.innerHTML = '<div style="color:#9ca3af; text-align:center; padding-top:100px;">í™˜ì ì„¤ëª…ì´ ìƒì„±ë©ë‹ˆë‹¤.</div>';
            return;
        }

        const items = masterData.filter(d => selIds.has(d.id));
        
        medBox.innerHTML = items.map(d => `
            <div style="margin-bottom:15px;">
                <strong>â–¶ ${d.label}</strong>
                <div style="margin-top:4px; padding-left:10px; border-left:3px solid #d1d5db;">${d.med.replace(/\n/g, '<br>')}</div>
            </div>`).join('');
            
        patBox.innerHTML = items.map(d => `
            <div style="margin-bottom:15px;">
                <strong>âœ… ${d.label}</strong>
                <div style="margin-top:4px;">${d.pat}</div>
            </div>`).join('');
    }

    function copyResult() {
        if(selIds.size === 0) return alert('ì„ íƒëœ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.');
        const items = masterData.filter(d => selIds.has(d.id));
        const txt = items.map(d => `[${d.label}]\n${d.med}`).join('\n\n');
        navigator.clipboard.writeText(txt).then(() => alert('EMR ê¸°ë¡ ë³µì‚¬ ì™„ë£Œ'));
    }

    // Start
    render();
</script>
</body>
</html>
